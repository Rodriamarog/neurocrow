{{define "message-bubble.html"}}
<div class="flex items-start max-w-[85%] {{if or (eq .Source "human") (eq .Source "bot")}}justify-end ml-auto{{else}}justify-start{{end}} space-x-2">
    {{if and (eq .Source "user") (ne .ProfilePictureURL "")}}
    <div class="h-8 w-8 rounded-full bg-gray-200 flex-shrink-0 overflow-hidden order-1">
        <img src="{{.ProfilePictureURL}}"
             alt="User Profile"
             class="h-full w-full object-cover">
    </div>
    {{end}}
    
    <div class="{{if eq .Source "human"}}bg-indigo-600 text-white{{else if eq .Source "bot"}}bg-indigo-500 text-white{{else}}bg-gray-100 text-gray-900{{end}} rounded-lg px-4 py-2 break-words max-w-full {{if eq .Source "human"}}order-1{{else if eq .Source "bot"}}order-1{{else}}order-2{{end}}">
        <p class="text-sm break-words">{{.Content}}</p>
    </div>
</div>
{{end}}